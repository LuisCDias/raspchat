<!DOCTYPE html>
<html>
<head>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta charset="utf-8">
  <meta name="robots" content="noindex">
  <title>Raspchat</title>
  <link href='./default.css' rel='stylesheet' type='text/css'>
</head>
<body>
  <div id="root" style="width: 100%; height: 100%; margin: 0; padding: 0; position: relative;">
    <template v-if="isConnected">
      <slot name="logsHolder"><chat-log :messages="currentGroup.messages"/></slot>
      <slot name="composeHolder"><chat-compose @send-message="sendMessage"/></slot>
    </template>
    <button v-else @click="connect">Connect</button>
  </div>

  <template id="chat-compose">
    <div class="bottomBar">
      <textarea class="msg code-font"
                v-model="message"
                @keydown.stop.prevent.enter="enterPressed"
                @keydown.stop.prevent.tab="tabPressed"
                placeholder="Type your message"></textarea>
      <input class='btn' type="button" style="" value="send" />
    </div>
  </template>

  <template id="chat-messages">
  <div class="chat-log">
    <div class="chat-message" v-for="m in messages">
      <chat-message :message="m" @chat-message-added="scrollToBottom"/>
    </div>
  </div>
  </template>

  <template id="chat-message">
  <div v-if="message.isMeta">
    <pre class="meta-message">{{{message.msg}}}</pre>
  </div>
  <div class="incomingMessage code-font" v-else>
    <img src="http://api.adorable.io/avatars/256/{{message.from}}.png" class="avatar" alt="{{message.from}}" />
    <div class="fromContainer">
      <span class="name">{{message.from}}</span>
      <span style="font-size: 12px">{{message.delivery_time}}</span>
    </div>
    <div class="markdown-container">
    {{{message.msg | markdown}}}
    </div>
    <div style="display: block; clear: both;">&nbsp;</div>
  </div>
  </template>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.7/socket.io.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/5.0.2/markdown-it.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.13/vue.min.js"></script>
<script src="./core.js"></script>
<script src="./chat.js"></script>
</html>
